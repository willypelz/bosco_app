'use strict';(function(h,H){function Ta(a){h.extend(!0,ua,a)}function mb(a,c,b){function d(){setTimeout(function(){!m.start&&h("body").is(":visible")&&l()},0)}function e(){return a.is(":visible")}function f(a){m&&a==m.name||(A++,m&&(L("viewDestroy",m,m,m.element),p(),m.triggerEventDestroy(),y(),m.element.remove(),M.deactivateButton(m.name)),M.activateButton(a),m=new Y[a](h("<div class='fc-view fc-view-"+a+"' style='position:relative'/>").appendTo(I),u),l(),ja(),A--)}function l(a){(!m.start||a||z<
m.start||z>=m.end)&&e()&&t(a)}function t(a){A++;m.start&&(L("viewDestroy",m,m,m.element),p(),q());y();m.render(z,a||0);r();ja();(m.afterRender||nb)();M.updateTitle(m.title);a=new Date;a>=m.start&&a<m.end?M.disableButton("today"):M.enableButton("today");L("viewRender",m,m,m.element);m.trigger("viewDisplay",K);A--;!c.lazyFetching||F(m.visStart,m.visEnd)?T(m.visStart,m.visEnd):x()}function k(){e()&&(p(),q(),n(),r(),x())}function n(){Q=c.contentHeight?c.contentHeight:c.height?c.height-(O?O.height():0)-
qa(I):Math.round(I.width()/Math.max(c.aspectRatio,.5))}function r(){Q===H&&n();A++;m.setHeight(Q);m.setWidth(I.width());A--;Da=a.outerWidth()}function g(){if(!A)if(m.start){var b=++s;setTimeout(function(){b==s&&!A&&e()&&Da!=(Da=a.outerWidth())&&(A++,k(),m.trigger("windowResize",K),A--)},200)}else d()}function C(a){q();x(a)}function x(a){e()&&(m.setEventData(D),m.renderEvents(D,a),m.trigger("eventAfterAllRender"))}function q(){m.triggerEventDestroy();m.clearEvents();m.clearEventData()}function p(){m&&
m.unselect()}function y(){I.css({width:"100%",height:I.height(),overflow:"hidden"})}function ja(){I.css({width:"",height:"",overflow:""})}function L(a,b){if(c[a])return c[a].apply(b||K,Array.prototype.slice.call(arguments,2))}var u=this;u.options=c;u.render=function(b){I?e()&&(n(),t(b)):(a.addClass("fc"),c.isRTL?a.addClass("fc-rtl"):a.addClass("fc-ltr"),c.theme&&a.addClass("ui-widget"),I=h("<div class='fc-content' style='position:relative'/>").prependTo(a),M=new ob(u,c),(O=M.render())&&a.prepend(O),
f(c.defaultView),c.handleWindowResize&&h(window).resize(g),h("body").is(":visible")||d())};u.destroy=function(){m&&(L("viewDestroy",m,m,m.element),m.triggerEventDestroy());h(window).unbind("resize",g);M.destroy();I.remove();a.removeClass("fc fc-rtl ui-widget")};u.refetchEvents=function(){q();T(m.visStart,m.visEnd)};u.reportEvents=function(a){D=a;x()};u.reportEventChange=function(a){C(a)};u.rerenderEvents=C;u.changeView=f;u.select=function(a,b,c){m.select(a,b,c===H?!0:c)};u.unselect=p;u.prev=function(){l(-1)};
u.next=function(){l(1)};u.prevYear=function(){Ea(z,-1);l()};u.nextYear=function(){Ea(z,1);l()};u.today=function(){z=new Date;l()};u.gotoDate=function(a,b,c){a instanceof Date?z=v(a):Ua(z,a,b,c);l()};u.incrementDate=function(a,b,c){a!==H&&Ea(z,a);b!==H&&Fa(z,b);c!==H&&E(z,c);l()};u.formatDate=function(a,b){return ea(a,b,c)};u.formatDates=function(a,b,d){return Ga(a,b,d,c)};u.getDate=function(){return v(z)};u.getView=function(){return m};u.option=function(a,b){if(b===H)return c[a];if("height"==a||"contentHeight"==
a||"aspectRatio"==a)c[a]=b,k()};u.trigger=L;pb.call(u,c,b);var F=u.isFetchNeeded,T=u.fetchEvents,K=a[0],M,O,I,m,Da,Q,s=0,A=0,z=new Date,D=[],J;Ua(z,c.year,c.month,c.date);c.droppable&&h(document).bind("dragstart",function(a,b){var d=a.target,e=h(d);if(!e.parents(".fc").length){var K=c.dropAccept;if(h.isFunction(K)?K.call(d,e):e.is(K))J=d,m.dragStart(J,a,b)}}).bind("dragstop",function(a,b){J&&(m.dragStop(J,a,b),J=null)})}function ob(a,c){function b(b){var d=h("<div class='fc-header-"+b+"'/>");(b=c.header[b])&&
h.each(b.split(" "),function(b){0<b&&d.append("<span class='fc-header-space'/>");var f;h.each(this.split(","),function(b,t){if("title"==t)d.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),f&&f.addClass(e+"-corner-right"),f=null;else{var g;a[t]?g=a[t]:Y[t]&&(g=function(){q.removeClass(e+"-state-hover");a.changeView(t)});if(g){var v=c.theme?Ha(c.buttonIcons,t):null,x=Ha(c.buttonText,t),q=h("<span class='fc-btn fc-button-"+t+" "+e+"-state-default'>"+(v?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+
v+"'/></span>":x)+"</span>").click(function(){q.hasClass(e+"-state-disabled")||g()}).mousedown(function(){q.not("."+e+"-state-active").not("."+e+"-state-disabled").addClass(e+"-state-down")}).mouseup(function(){q.removeClass(e+"-state-down")}).hover(function(){q.not("."+e+"-state-active").not("."+e+"-state-disabled").addClass(e+"-state-hover")},function(){q.removeClass(e+"-state-hover").removeClass(e+"-state-down")}).appendTo(d);va(q);f||q.addClass(e+"-corner-left");f=q}}});f&&f.addClass(e+"-corner-right")});
return d}this.render=function(){e=c.theme?"ui":"fc";if(c.header)return d=h("<div class='fc-header' style='width:100%'/>").append(h("<div/>").append(b("left")).append(b("center")).append(b("right")))};this.destroy=function(){d.remove()};this.updateTitle=function(a){d.find("h2").html(a)};this.activateButton=function(a){d.find("span.fc-button-"+a).addClass(e+"-state-active")};this.deactivateButton=function(a){d.find("span.fc-button-"+a).removeClass(e+"-state-active")};this.disableButton=function(a){d.find("span.fc-button-"+
a).addClass(e+"-state-disabled")};this.enableButton=function(a){d.find("span.fc-button-"+a).removeClass(e+"-state-disabled")};var d=h([]),e}function pb(a,c){function b(b,c){d(b,function(d){if(c==E){if(d){a.eventDataTransform&&(d=h.map(d,a.eventDataTransform));b.eventDataTransform&&(d=h.map(d,b.eventDataTransform));for(var e=0;e<d.length;e++)d[e].source=b,t(d[e]);F=F.concat(d)}L--;L||C(F)}})}function d(b,c){var e,k=N.sourceFetchers,g;for(e=0;e<k.length;e++){g=k[e](b,p,y,c);if(!0===g)return;if("object"==
typeof g){d(g,c);return}}if(e=b.events)h.isFunction(e)?(f(),e(v(p),v(y),function(a){c(a);l()})):h.isArray(e)?c(e):c();else if(b.url){var n=b.success,t=b.error,s=b.complete;e=h.isFunction(b.data)?b.data():b.data;e=h.extend({},e||{});k=fa(b.startParam,a.startParam);g=fa(b.endParam,a.endParam);k&&(e[k]=Math.round(+p/1E3));g&&(e[g]=Math.round(+y/1E3));f();h.ajax(h.extend({},qb,b,{data:e,success:function(a){a=a||[];var b=wa(n,this,arguments);h.isArray(b)&&(a=b);c(a)},error:function(){wa(t,this,arguments);
c()},complete:function(){wa(s,this,arguments);l()}}))}else c()}function e(a){h.isFunction(a)||h.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a){var b=a;b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[];for(var c=N.sourceNormalizers,d=0;d<c.length;d++)c[d](b);q.push(a);return a}}function f(){u++||r("loading",null,!0,g())}function l(){--u||r("loading",null,!1,g())}function t(b){var c=b.source||{},d=fa(c.ignoreTimezone,a.ignoreTimezone);
b._id=b._id||(b.id===H?"_fc"+rb++:b.id+"");b.date&&(b.start||(b.start=b.date),delete b.date);b._start=v(b.start=Ia(b.start,d));b.end=Ia(b.end,d);b.end&&b.end<=b.start&&(b.end=null);b._end=b.end?v(b.end):null;b.allDay===H&&(b.allDay=fa(c.allDayDefault,a.allDayDefault));b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function k(a,b){return a&&b&&n(a)==n(b)}function n(a){return("object"==typeof a?a.googleCalendarId||a.events||a.url:"")||a}this.isFetchNeeded=
function(a,b){return!p||a<p||b>y};this.fetchEvents=function(a,c){p=a;y=c;F=[];var d=++E,e=q.length;L=e;for(var f=0;f<e;f++)b(q[f],d)};this.addEventSource=function(a){if(a=e(a))L++,b(a,E)};this.removeEventSource=function(a){q=h.grep(q,function(b){return!k(b,a)});F=h.grep(F,function(b){return!k(b.source,a)});C(F)};this.updateEvent=function(a){var b,c=F.length,d,e=g().defaultEventEnd,f=a.start-a._start,l=a.end?a.end-(a._end||e(a)):0;for(b=0;b<c;b++)d=F[b],d._id==a._id&&d!=a&&(d.start=new Date(+d.start+
f),d.end=a.end?d.end?new Date(+d.end+l):new Date(+e(d)+l):null,d.title=a.title,d.url=a.url,d.allDay=a.allDay,d.className=a.className,d.editable=a.editable,d.color=a.color,d.backgroundColor=a.backgroundColor,d.borderColor=a.borderColor,d.textColor=a.textColor,t(d));t(a);C(F)};this.renderEvent=function(a,b){t(a);a.source||(b&&(x.events.push(a),a.source=x),F.push(a));C(F)};this.removeEvents=function(a){if(a){if(!h.isFunction(a)){var b=a+"";a=function(a){return a._id==b}}F=h.grep(F,a,!0);for(c=0;c<q.length;c++)h.isArray(q[c].events)&&
(q[c].events=h.grep(q[c].events,a,!0))}else{F=[];for(var c=0;c<q.length;c++)h.isArray(q[c].events)&&(q[c].events=[])}C(F)};this.clientEvents=function(a){return h.isFunction(a)?h.grep(F,a):a?(a+="",h.grep(F,function(b){return b._id==a})):F};this.normalizeEvent=t;for(var r=this.trigger,g=this.getView,C=this.reportEvents,x={events:[]},q=[x],p,y,E=0,L=0,u=0,F=[],T=0;T<c.length;T++)e(c[T])}function Ea(a,c,b){a.setFullYear(a.getFullYear()+c);b||ka(a);return a}function Fa(a,c,b){if(+a){c=a.getMonth()+c;
var d=v(a);d.setDate(1);d.setMonth(c);a.setMonth(c);for(b||ka(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(a<d?1:-1))}return a}function E(a,c,b){if(+a){c=a.getDate()+c;var d=v(a);d.setHours(9);d.setDate(c);a.setDate(c);b||ka(a);Ja(a,d)}return a}function Ja(a,c){if(+a)for(;a.getDate()!=c.getDate();)a.setTime(+a+(a<c?1:-1)*sb)}function P(a,c){a.setMinutes(a.getMinutes()+c);return a}function ka(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function v(a,c){return c?
ka(new Date(+a)):new Date(+a)}function Va(){var a=0,c;do c=new Date(1970,a++,1);while(c.getHours());return c}function ga(a,c){return Math.round((v(a,!0)-v(c,!0))/tb)}function Ua(a,c,b,d){c!==H&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c));b!==H&&b!=a.getMonth()&&(a.setDate(1),a.setMonth(b));d!==H&&a.setDate(d)}function Ia(a,c){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));
c===H&&(c=!0);return Ka(a,c)||(a?new Date(a):null)}return null}function Ka(a,c){var b=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!b)return null;var d=new Date(b[1],0,1);if(c||!b[13]){var e=new Date(b[1],0,1,9,0);b[3]&&(d.setMonth(b[3]-1),e.setMonth(b[3]-1));b[5]&&(d.setDate(b[5]),e.setDate(b[5]));Ja(d,e);b[7]&&d.setHours(b[7]);b[8]&&d.setMinutes(b[8]);b[10]&&d.setSeconds(b[10]);b[12]&&d.setMilliseconds(1E3*
Number("0."+b[12]));Ja(d,e)}else d.setUTCFullYear(b[1],b[3]?b[3]-1:0,b[5]||1),d.setUTCHours(b[7]||0,b[8]||0,b[10]||0,b[12]?1E3*Number("0."+b[12]):0),b[14]&&(e=60*Number(b[16])+(b[18]?Number(b[18]):0),e*="-"==b[15]?1:-1,d=new Date(+d+6E4*e));return d}function La(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var c=parseInt(a[1],10);a[3]&&(c%=12,"p"==a[3].toLowerCase().charAt(0)&&(c+=12));return 60*c+(a[2]?
parseInt(a[2],10):0)}}function ea(a,c,b){return Ga(a,null,c,b)}function Ga(a,c,b,d){d=d||ua;var e=a,f=c,l,h=b.length,k,n,v,g="";for(l=0;l<h;l++)if(k=b.charAt(l),"'"==k)for(n=l+1;n<h;n++){if("'"==b.charAt(n)){e&&(g=n==l+1?g+"'":g+b.substring(l+1,n),l=n);break}}else if("("==k)for(n=l+1;n<h;n++){if(")"==b.charAt(n)){l=ea(e,b.substring(l+1,n),d);parseInt(l.replace(/\D/,""),10)&&(g+=l);l=n;break}}else if("["==k)for(n=l+1;n<h;n++){if("]"==b.charAt(n)){k=b.substring(l+1,n);l=ea(e,k,d);l!=ea(f,k,d)&&(g+=
l);l=n;break}}else if("{"==k)e=c,f=a;else if("}"==k)e=a,f=c;else{for(n=h;n>l;n--)if(v=Wa[b.substring(l,n)]){e&&(g+=v(e,d));l=n-1;break}n==l&&e&&(g+=k)}return g}function ra(a){if(a.end){var c=a.end;a=a.allDay;c=v(c);return a||c.getHours()||c.getMinutes()?E(c,1):ka(c)}return E(v(a.start),1)}function Xa(a,c,b){a.unbind("mouseover").mouseover(function(a){for(var e=a.target,f;e!=this;)f=e,e=e.parentNode;(e=f._fci)!==H&&(f._fci=H,f=c[e],b(f.event,f.element,f),h(a.target).trigger(a));a.stopPropagation()})}
function sa(a,c,b){for(var d=0,e;d<a.length;d++)e=h(a[d]),e.width(Math.max(0,c-Ma(e,b)))}function Ya(a,c,b){for(var d=0,e;d<a.length;d++)e=h(a[d]),e.height(Math.max(0,c-qa(e,b)))}function Ma(a,c){var b;b=(parseFloat(h.css(a[0],"paddingLeft",!0))||0)+(parseFloat(h.css(a[0],"paddingRight",!0))||0);var d;d=(parseFloat(h.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(h.css(a[0],"borderRightWidth",!0))||0);b+=d;d=c?(parseFloat(h.css(a[0],"marginLeft",!0))||0)+(parseFloat(h.css(a[0],"marginRight",!0))||
0):0;return b+d}function qa(a,c){var b;b=(parseFloat(h.css(a[0],"paddingTop",!0))||0)+(parseFloat(h.css(a[0],"paddingBottom",!0))||0);var d;d=(parseFloat(h.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(h.css(a[0],"borderBottomWidth",!0))||0);b+=d;d=c?(parseFloat(h.css(a[0],"marginTop",!0))||0)+(parseFloat(h.css(a[0],"marginBottom",!0))||0):0;return b+d}function nb(){}function Za(a,c){return a-c}function aa(a){return(10>a?"0":"")+a}function Ha(a,c){if(a[c]!==H)return a[c];for(var b=c.split(/(?=[A-Z])/),
d=b.length-1,e;0<=d;d--)if(e=a[b[d].toLowerCase()],e!==H)return e;return a[""]}function ba(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function va(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function xa(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function $a(a,c){var b=a.source||{},d=a.color,e=b.color,f=c("eventColor"),l=a.backgroundColor||d||b.backgroundColor||e||c("eventBackgroundColor")||f,d=a.borderColor||d||b.borderColor||e||c("eventBorderColor")||f,b=a.textColor||b.textColor||c("eventTextColor"),e=[];l&&e.push("background-color:"+l);d&&e.push("border-color:"+d);b&&e.push("color:"+b);return e.join(";")}function wa(a,c,b){h.isFunction(a)&&(a=[a]);if(a){var d,e;for(d=0;d<a.length;d++)e=a[d].apply(c,b)||e;return e}}function fa(){for(var a=
0;a<arguments.length;a++)if(arguments[a]!==H)return arguments[a]}function Na(a,c,b){function d(){var b=e();L&&L.remove();L=h(b).appendTo(a);u=L.find("thead");F=u.find(".fc-day-header");T=L.find("tbody");K=T.find("tr");M=T.find(".fc-day");O=K.find("td:first-child");I=K.eq(0).find(".fc-day > div");m=K.eq(0).find(".fc-day-content > div");xa(u.add(u.find("tr")));xa(K);K.eq(0).addClass("fc-first");K.filter(":last").addClass("fc-last");M.each(function(a,b){var c=q(Math.floor(a/J),a%J);r("dayRender",k,c,
h(b))});M.click(f).mousedown(x)}function e(){var a=X+"-widget-header",b,c,d;b="<thead><tr>";V&&(b+="<th class='fc-week-number "+a+"'>"+ba(S)+"</th>");for(c=0;c<J;c++)d=q(0,c),b+="<th class='fc-day-header fc-"+ya[d.getDay()]+" "+a+"'>"+ba(H(d,ma))+"</th>";a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+(b+"</tr></thead>");b=X+"-widget-content";var e,f;e="<tbody>";for(c=0;c<D;c++){e+="<tr class='fc-week'>";V&&(f=q(c,0),e+="<td class='fc-week-number "+b+"'><div>"+ba(H(f,ta))+
"</div></td>");for(d=0;d<J;d++){f=q(c,d);var s=X+"-widget-content",l=k.start.getMonth(),h=ka(new Date),g="",s=["fc-day","fc-"+ya[f.getDay()],s];f.getMonth()!=l&&s.push("fc-other-month");+f==+h?s.push("fc-today",X+"-state-highlight"):f<h?s.push("fc-past"):s.push("fc-future");g+="<td class='"+s.join(" ")+"' data-date='"+H(f,"yyyy-MM-dd")+"'><div>";da&&(g+="<div class='fc-day-number'>"+f.getDate()+"</div>");g+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";
e+=g}e+="</tr>"}return a+(e+"</tbody>")+"</table>"}function f(a){if(!n("selectable")){var b=Ka(h(this).data("date"));r("dayClick",this,b,!0,a)}}function l(a,b,c){c&&Z.build();a=y(a,b);for(b=0;b<a.length;b++)c=a[b],t(c.row,c.leftCol,c.row,c.rightCol).click(f).mousedown(x)}function t(b,c,d,e){b=Z.rect(b,c,d,e,a);return g(b,a)}var k=this;k.renderBasic=function(b,c,e){D=b;J=c;da=e;X=n("theme")?"ui":"fc";ma=n("columnFormat");V=n("weekNumbers");S=n("weekNumberTitle");ta="iso"!=n("weekNumberCalculation")?
"w":"W";T||(P=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a));d()};k.setHeight=function(a){s=a;a=s-u.height();var b,c,d;"variable"==n("weekMode")?b=c=Math.floor(a/(1==D?2:6)):(b=Math.floor(a/D),c=a-b*(D-1));O.each(function(a,e){a<D&&(d=h(e),d.find("> div").css("min-height",(a==D-1?c:b)-qa(d)))})};k.setWidth=function(a){Q=a;U.clear();W.clear();z=0;V&&(z=u.find("th.fc-week-number").outerWidth());A=Math.floor((Q-z)/J);sa(F.slice(0,-1),A)};k.renderDayOverlay=
l;k.defaultSelectionEnd=function(a,b){return v(a)};k.renderSelection=function(a,b,c){l(a,E(v(b),1),!0)};k.clearSelection=function(){C()};k.reportDayClick=function(a,b,c){var d=p(a);r("dayClick",M[d.row*J+d.col],a,b,c)};k.dragStart=function(a,b,c){$.start(function(a){C();a&&t(a.row,a.col,a.row,a.col)},b)};k.dragStop=function(a,b,c){var d=$.stop();C();d&&(d=q(d),r("drop",a,d,!0,b,c))};k.defaultEventEnd=function(a){return v(a.start)};k.getHoverListener=function(){return $};k.colLeft=function(a){return U.left(a)};
k.colRight=function(a){return U.right(a)};k.colContentLeft=function(a){return W.left(a)};k.colContentRight=function(a){return W.right(a)};k.getIsCellAllDay=function(){return!0};k.allDayRow=function(a){return K.eq(a)};k.getRowCnt=function(){return D};k.getColCnt=function(){return J};k.getColWidth=function(){return A};k.getDaySegmentContainer=function(){return P};bb.call(k,a,c,b);cb.call(k);db.call(k);ub.call(k);var n=k.opt,r=k.trigger,g=k.renderOverlay,C=k.clearOverlays,x=k.daySelectionMousedown,q=
k.cellToDate,p=k.dateToCell,y=k.rangeToSegments,H=c.formatDate,L,u,F,T,K,M,O,I,m,P,Q,s,A,z,D,J,da,Z,$,U,W,X,ma,V,S,ta;va(a.addClass("fc-grid"));Z=new eb(function(a,b){var c,d,e;F.each(function(a,f){c=h(f);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();K.each(function(b,f){b<D&&(c=h(f),d=c.offset().top,b&&(e[1]=d),e=[d],a[b]=e)});e[1]=d+c.outerHeight()});$=new fb(Z);U=new Aa(function(a){return I.eq(a)});W=new Aa(function(a){return m.eq(a)})}function ub(){var a=this;a.renderEvents=
function(c,b){a.renderDayEvents(c,b)};a.clearEvents=function(){a.getDaySegmentContainer().empty()};gb.call(a)}function hb(a,c,b){function d(){var b;b=na+"-widget-header";var c,d,e;d="<thead><tr>";fa?(c=O(0,0),c=N(c,ga),c=ib?c+aa:aa+c,d+="<th class='fc-agenda-axis fc-week-number "+b+"'>"+ba(c)+"</th>"):d+="<th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(e=0;e<ha;e++)c=O(0,e),d+="<th class='fc-"+ya[c.getDay()]+" fc-col"+e+" "+b+"'>"+ba(N(c,ea))+"</th>";b="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+
(d+("<th class='fc-agenda-gutter "+b+"'>&nbsp;</th></tr></thead>"));e=na+"-widget-header";d=na+"-widget-content";var f;c=ka(new Date);var S,w,l;l=""+("<tbody><tr><th class='fc-agenda-axis "+e+"'>&nbsp;</th>");S="";for(e=0;e<ha;e++)f=O(0,e),w=["fc-col"+e,"fc-"+ya[f.getDay()],d],+f==+c?w.push(na+"-state-highlight","fc-today"):f<c?w.push("fc-past"):w.push("fc-future"),f="<td class='"+w.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",S+=f;l=
l+S+("<td class='fc-agenda-gutter "+d+"'>&nbsp;</td></tr></tbody>");b=b+l+"</table>";Q&&Q.remove();Q=h(b).appendTo(a);s=Q.find("thead");A=s.find("th").slice(1,-1);z=Q.find("tbody");D=z.find("td").slice(0,-1);J=D.find("> div");da=D.find(".fc-day-content > div");Z=D.eq(0);$=J.eq(0);xa(s.add(s.find("tr")));xa(z.add(z.find("tr")))}function e(){function a(){V.scrollTop(d)}var b=Va(),c=v(b);c.setHours(y("firstHour"));var d=g(b,c)+1;a();setTimeout(a,0)}function f(a){if(!y("selectable")){var b=Math.min(ha-
1,Math.floor((a.pageX-Q.offset().left-oa)/G)),c=O(0,b),d=this.parentNode.className.match(/fc-slot(\d+)/);d?(d=parseInt(d[1])*y("slotMinutes"),c.setHours(Math.floor(d/60)),c.setMinutes(d%60+R),ja("dayClick",D[b],c,!1,a)):ja("dayClick",D[b],c,!0,a)}}function l(a,b,c){c&&ia.build();a=m(a,b);for(b=0;b<a.length;b++)c=a[b],t(c.row,c.leftCol,c.row,c.rightCol).click(f).mousedown(K)}function t(a,b,c,d){a=ia.rect(a,b,c,d,U);return L(a,U)}function k(a,b){for(var c=0;c<ha;c++){var d=O(0,c),e=E(v(d),1),s=new Date(Math.max(d,
a)),w=new Date(Math.min(e,b));s<w&&(e=ia.rect(0,c,0,c,S),s=g(d,s),d=g(d,w),e.top=s,e.height=d-s,L(e,S).click(f).mousedown(q))}}function n(a){return y("allDaySlot")&&!a.row}function r(a){var b=O(0,a.col);a=a.row;y("allDaySlot")&&a--;0<=a&&P(b,R+a*B);return b}function g(a,b){a=v(a,!0);if(b<P(v(a),R))return 0;if(b>=P(v(a),Y))return la.height();var c=y("slotMinutes"),d=60*b.getHours()+b.getMinutes()-R,e=Math.floor(d/c),f=Qa[e];f===H&&(f=Qa[e]=la.find("tr").eq(e).find("td div")[0].offsetTop);return Math.max(0,
Math.round(f-1+d%c/c*Oa))}function C(a,b){var c=y("selectHelper");ia.build();if(c){var d=I(a).col;if(0<=d&&d<ha){var d=ia.rect(0,d,0,d,S),e=g(a,a),s=g(a,b);if(s>e){d.top=e;d.height=s-e;d.left+=2;d.width-=5;if(h.isFunction(c)){if(c=c(a,b))d.position="absolute",ca=h(c).css(d).appendTo(S)}else d.isStart=!0,d.isEnd=!0,ca=h(M({title:"",start:a,end:b,className:["fc-select-helper"],editable:!1},d)),ca.css("opacity",y("dragOpacity"));ca&&(ca.click(f).mousedown(q),S.append(ca),sa(ca,d.width,!0),Ya(ca,d.height,
!0))}}}else k(a,b)}function x(){u();ca&&(ca.remove(),ca=null)}function q(a){if(1==a.which&&y("selectable")){T(a);var b;pa.start(function(a,c){x();if(a&&a.col==c.col&&!n(a)){var d=r(c),e=r(a);b=[d,P(v(d),B),e,P(v(e),B)].sort(Za);C(b[0],b[3])}else b=null},a);h(document).one("mouseup",function(a){pa.stop();b&&(+b[0]==+b[1]&&p(b[0],!1,a),F(b[0],b[3],!1,a))})}}function p(a,b,c){ja("dayClick",D[I(a).col],a,b,c)}this.renderAgenda=function(b){ha=b;na=y("theme")?"ui":"fc";ib=y("isRTL");R=La(y("minTime"));
Y=La(y("maxTime"));ea=y("columnFormat");fa=y("weekNumbers");aa=y("weekNumberTitle");ga="iso"!=y("weekNumberCalculation")?"w":"W";B=y("snapMinutes")||y("slotMinutes");if(Q)d();else{b=na+"-widget-header";var c=na+"-widget-content",e,s,w,l,g,A=0==y("slotMinutes")%15;d();U=h("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);y("allDaySlot")?(W=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(U),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+
b+" fc-agenda-axis'>"+y("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>",X=h(e).appendTo(U),ma=X.find("tr"),ma.find("td").click(f).mousedown(K),U.append("<div class='fc-agenda-divider "+b+"'><div class='fc-agenda-divider-inner'/></div>")):W=h([]);V=h("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(U);S=h("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(V);
ta=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(S);e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";s=Va();l=P(v(s),Y);P(s,R);for(w=Ra=0;s<l;w++)g=s.getMinutes(),e+="<tr class='fc-slot"+w+" "+(g?"fc-minor":"")+"'><th class='fc-agenda-axis "+b+"'>"+(A&&g?"&nbsp;":N(s,y("axisFormat")))+"</th><td class='"+c+"'><div style='position:relative'>&nbsp;</div></td></tr>",P(s,y("slotMinutes")),Ra++;la=h(e+"</tbody></table>").appendTo(S);
la.find("td").click(f).mousedown(q)}};this.setWidth=function(a){Ba.clear();Ca.clear();a=s.find("th:first");X&&(a=a.add(X.find("th:first")));a=a.add(la.find("th:first"));oa=0;sa(a.width("").each(function(a,b){oa=Math.max(oa,h(b).outerWidth())}),oa);a=Q.find(".fc-agenda-gutter");X&&(a=a.add(X.find("th.fc-agenda-gutter")));var b=V[0].clientWidth;(ab=V.width()-b)?(sa(a,ab),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last");G=Math.floor((b-oa)/ha);sa(A.slice(0,-1),G)};this.setHeight=
function(a){a===H&&(a=w);w=a;Qa={};var b=z.position().top,c=V.position().top;a=Math.min(a-b,la.height()+c+1);$.height(a-qa(Z));U.css("top",b);V.height(a-c-1);Oa=la.find("tr:first").height()+1;Pa=y("slotMinutes")/B;za=Oa/Pa};this.afterRender=function(){e()};this.defaultEventEnd=function(a){var b=v(a.start);return a.allDay?b:P(b,y("defaultEventMinutes"))};this.timePosition=g;this.getIsCellAllDay=n;this.allDayRow=function(a){return ma};this.getCoordinateGrid=function(){return ia};this.getHoverListener=
function(){return pa};this.colLeft=function(a){return Ba.left(a)};this.colRight=function(a){return Ba.right(a)};this.colContentLeft=function(a){return Ca.left(a)};this.colContentRight=function(a){return Ca.right(a)};this.getDaySegmentContainer=function(){return W};this.getSlotSegmentContainer=function(){return ta};this.getMinMinute=function(){return R};this.getMaxMinute=function(){return Y};this.getSlotContainer=function(){return S};this.getRowCnt=function(){return 1};this.getColCnt=function(){return ha};
this.getColWidth=function(){return G};this.getSnapHeight=function(){return za};this.getSnapMinutes=function(){return B};this.defaultSelectionEnd=function(a,b){return b?v(a):P(v(a),y("slotMinutes"))};this.renderDayOverlay=l;this.renderSelection=function(a,b,c){c?y("allDaySlot")&&l(a,E(v(b),1),!0):C(a,b)};this.clearSelection=x;this.reportDayClick=p;this.dragStart=function(a,b,c){pa.start(function(a){u();if(a)if(n(a))t(a.row,a.col,a.row,a.col);else{a=r(a);var b=P(v(a),y("defaultEventMinutes"));k(a,b)}},
b)};this.dragStop=function(a,b,c){var d=pa.stop();u();d&&ja("drop",a,r(d),n(d),b,c)};bb.call(this,a,c,b);cb.call(this);db.call(this);vb.call(this);var y=this.opt,ja=this.trigger,L=this.renderOverlay,u=this.clearOverlays,F=this.reportSelection,T=this.unselect,K=this.daySelectionMousedown,M=this.slotSegHtml,O=this.cellToDate,I=this.dateToCell,m=this.rangeToSegments,N=c.formatDate,Q,s,A,z,D,J,da,Z,$,U,W,X,ma,V,S,ta,la,ca,w,oa,G,ab,Oa,B,Pa,za,ha,Ra,ia,pa,Ba,Ca,Qa={},na,ib,R,Y,ea,fa,aa,ga;va(a.addClass("fc-agenda"));
ia=new eb(function(a,b){var c,d,e;A.each(function(a,f){c=h(f);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();y("allDaySlot")&&(c=ma,d=c.offset().top,a[0]=[d,d+c.outerHeight()]);for(var f=S.offset().top,s=V.offset().top,w=s+V.outerHeight(),l=0;l<Ra*Pa;l++)a.push([Math.max(s,Math.min(w,f+za*l)),Math.max(s,Math.min(w,f+za*(l+1)))])});pa=new fb(ia);Ba=new Aa(function(a){return J.eq(a)});Ca=new Aa(function(a){return da.eq(a)})}function vb(){function a(a){return a.end?v(a.end):P(v(a.start),
l("defaultEventMinutes"))}function c(a,b){var c="<",d=a.url,e=$a(a,l),f=["fc-event","fc-event-vert"];k(a)&&f.push("fc-event-draggable");b.isStart&&f.push("fc-event-start");b.isEnd&&f.push("fc-event-end");f=f.concat(a.className);a.source&&(f=f.concat(a.source.className||[]));c=d?c+("a href='"+ba(a.url)+"'"):c+"div";c+=" class='"+f.join(" ")+"' style='position:absolute;top:"+b.top+"px;left:"+b.left+"px;"+e+"'><div class='fc-event-inner'><div class='fc-event-time'>"+ba(W(a.start,a.end,l("timeFormat")))+
"</div><div class='fc-event-title'>"+ba(a.title||"")+"</div></div><div class='fc-event-bg'></div>";b.isEnd&&n(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return c+("</"+(d?"a":"div")+">")}function b(a,b,c){var f=b.find("div.fc-event-time");k(a)&&d(a,b,f);c.isEnd&&n(a)&&e(a,b,f);g(a,b)}function d(a,b,c){function d(){da();if(p)if(q)c.hide(),b.draggable("option","grid",null),J(E(v(a.start),x),E(ra(a),x));else{var e=C,f=P(v(a.start),e),s;a.end&&(s=P(v(a.end),e));c.text(W(f,s,l("timeFormat")));
c.css("display","");b.draggable("option","grid",[h,w])}}var e=f.getCoordinateGrid(),g=M(),h=O(),w=I(),k=m(),G,n,p,B,q,D,r,y,x,C,F;b.draggable({scroll:!1,grid:[h,w],axis:1==g?"y":!1,opacity:l("dragOpacity"),revertDuration:l("dragRevertDuration"),start:function(c,d){t("eventDragStart",b,a,c,d);A(a,b);e.build();G=b.position();n=e.cell(c.pageX,c.pageY);p=B=!0;q=D=u(n);C=F=x=r=y=0},drag:function(a,c){var f=e.cell(a.pageX,a.pageY);if(p=!!f){q=u(f);r=Math.round((c.position.left-G.left)/h);if(r!=y){var f=
K(0,n.col),s=n.col+r,s=Math.max(0,s),s=Math.min(g-1,s),s=K(0,s);x=ga(s,f)}q||(C=Math.round((c.position.top-G.top)/w)*k)}if(p!=B||q!=D||r!=y||C!=F)d(),B=p,D=q,y=r,F=C;b.draggable("option","revert",!p)},stop:function(c,e){da();t("eventDragStop",b,a,c,e);p&&(q||x||C)?z(this,a,x,q?0:C,q,c,e):(p=!0,q=!1,C=x=r=0,d(),b.css("filter",""),b.css(G),s(a,b))}})}function e(a,b,c){var d,e,f=I(),g=m();b.resizable({handles:{s:".ui-resizable-handle"},grid:f,start:function(c,f){d=e=0;A(a,b);t("eventResizeStart",this,
a,c,f)},resize:function(s,h){d=Math.round((Math.max(f,b.height())-h.originalSize.height)/f);d!=e&&(c.text(W(a.start,d||a.end?P(r(a),g*d):null,l("timeFormat"))),e=d)},stop:function(c,e){t("eventResizeStop",this,a,c,e);d?D(this,a,0,g*d,c,e):s(a,b)}})}var f=this;f.renderEvents=function(d,e){var f,s=d.length,g=[],A=[];for(f=0;f<s;f++)d[f].allDay?g.push(d[f]):A.push(d[f]);l("allDaySlot")&&(Z(g,e),C());var s=M(),g=N(),k=y(),w,n=h.map(A,a),G,p,m,B;f=[];for(G=0;G<s;G++){w=K(0,G);P(w,g);p=A;m=n;B=w;w=P(v(w),
k-g);for(var z=[],D=void 0,r=p.length,u=void 0,x=void 0,J=void 0,E=J=x=void 0,I=void 0,D=0;D<r;D++)u=p[D],x=u.start,J=m[D],J>B&&x<w&&(x<B?(x=v(B),E=!1):E=!0,J>w?(J=v(w),I=!1):I=!0,z.push({event:u,start:x,end:J,isStart:E,isEnd:I}));m=B=z.sort(jb);p=void 0;p=[];z=w=B=void 0;for(B=0;B<m.length;B++){w=m[B];for(z=0;z<p.length&&kb(w,p[z]).length;z++);(p[z]||(p[z]=[])).push(w)}m=p[0];r=D=z=w=B=B=void 0;for(B=0;B<p.length;B++)for(w=p[B],z=0;z<w.length;z++)for(D=w[z],D.forwardSegs=[],r=B+1;r<p.length;r++)kb(D,
p[r],D.forwardSegs);if(m){for(B=0;B<m.length;B++)lb(m[B]);for(B=0;B<m.length;B++)Sa(m[B],0,0)}m=[];z=w=B=void 0;for(B=0;B<p.length;B++)for(w=p[B],z=0;z<w.length;z++)m.push(w[z]);B=m;for(p=0;p<B.length;p++)m=B[p],m.col=G,f.push(m)}s=f.length;z="";n=q();D=l("isRTL");for(A=0;A<s;A++)g=f[A],k=g.event,G=L(g.start,g.start),p=L(g.start,g.end),m=F(g.col),B=T(g.col),r=B-m,B-=.025*r,r=B-m,w=r*(g.forwardCoord-g.backwardCoord),l("slotEventOverlap")&&(w=Math.max(2*(w-10),w)),D?(u=B-g.backwardCoord*r,r=u-w):(r=
m+g.backwardCoord*r,u=r+w),r=Math.max(r,m),u=Math.min(u,B),w=u-r,g.top=G,g.left=r,g.outerWidth=w,g.outerHeight=p-G,z+=c(k,g);n[0].innerHTML=z;p=n.children();for(A=0;A<s;A++)g=f[A],k=g.event,G=h(p[A]),m=t("eventRender",k,k,G),!1===m?G.remove():(m&&!0!==m&&(G.remove(),G=h(m).css({position:"absolute",top:g.top,left:g.left}).appendTo(n)),g.element=G,k._id===e?b(k,G,g):G[0]._fci=A,Q(k,G));Xa(n,f,b);for(A=0;A<s;A++)if(g=f[A],G=g.element)g.vsides=qa(G,!0),g.hsides=Ma(G,!0),k=G.find(".fc-event-title"),k.length&&
(g.contentTop=k[0].offsetTop);for(A=0;A<s;A++)if(g=f[A],G=g.element)G[0].style.width=Math.max(0,g.outerWidth-g.hsides)+"px",n=Math.max(0,g.outerHeight-g.vsides),G[0].style.height=n+"px",k=g.event,g.contentTop!==H&&10>n-g.contentTop&&(G.find("div.fc-event-time").text(U(k.start,l("timeFormat"))+" - "+k.title),G.find("div.fc-event-title").remove()),t("eventAfterRender",k,k,G)};f.clearEvents=function(){x().empty();q().empty()};f.slotSegHtml=c;gb.call(f);var l=f.opt,t=f.trigger,k=f.isEventDraggable,n=
f.isEventResizable,r=f.eventEnd,g=f.eventElementHandlers,C=f.setHeight,x=f.getDaySegmentContainer,q=f.getSlotSegmentContainer,p=f.getHoverListener,y=f.getMaxMinute,N=f.getMinMinute,L=f.timePosition,u=f.getIsCellAllDay,F=f.colContentLeft,T=f.colContentRight,K=f.cellToDate,M=f.getColCnt,O=f.getColWidth,I=f.getSnapHeight,m=f.getSnapMinutes,R=f.getSlotContainer,Q=f.reportEventElement,s=f.showEvents,A=f.hideEvents,z=f.eventDrop,D=f.eventResize,J=f.renderDayOverlay,da=f.clearOverlays,Z=f.renderDayEvents,
$=f.calendar,U=$.formatDate,W=$.formatDates;f.draggableDayEvent=function(a,b,c){function d(){w||(b.width(f).height("").draggable("option","grid",null),w=!0)}var e=c.isStart,f,g,w=!0,k,h=p(),n=O(),r=I(),q=m(),D=N();b.draggable({opacity:l("dragOpacity","month"),revertDuration:l("dragRevertDuration"),start:function(c,s){t("eventDragStart",b,a,c,s);A(a,b);f=b.width();h.start(function(c,f){da();if(c){g=!1;var s=K(0,f.col),A=K(0,c.col);k=ga(A,s);c.row?e?w&&(b.width(n-10),Ya(b,r*Math.round((a.end?(a.end-
a.start)/wb:l("defaultEventMinutes"))/q)),b.draggable("option","grid",[n,1]),w=!1):g=!0:(J(E(v(a.start),k),E(ra(a),k)),d());g=g||w&&!k}else d(),g=!0;b.draggable("option","revert",g)},c,"drag")},stop:function(c,e){h.stop();da();t("eventDragStop",b,a,c,e);if(g)d(),b.css("filter",""),s(a,b);else{var f=0;w||(f=Math.round((b.offset().top-R().offset().top)/r)*q+D-(60*a.start.getHours()+a.start.getMinutes()));z(this,a,k,f,w,c,e)}}})}}function lb(a){var c=a.forwardSegs,b=0,d,e;if(a.forwardPressure===H){for(d=
0;d<c.length;d++)e=c[d],lb(e),b=Math.max(b,1+e.forwardPressure);a.forwardPressure=b}}function Sa(a,c,b){var d=a.forwardSegs;if(a.forwardCoord===H)for(d.length?(d.sort(xb),Sa(d[0],c+1,b),a.forwardCoord=d[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-b)/(c+1),c=0;c<d.length;c++)Sa(d[c],0,a.forwardCoord)}function kb(a,c,b){b=b||[];for(var d=0;d<c.length;d++){var e=c[d];a.end>e.start&&a.start<e.end&&b.push(c[d])}return b}function xb(a,c){return c.forwardPressure-a.forwardPressure||
(a.backwardCoord||0)-(c.backwardCoord||0)||jb(a,c)}function jb(a,c){return a.start-c.start||c.end-c.start-(a.end-a.start)||(a.event.title||"").localeCompare(c.event.title)}function bb(a,c,b){function d(a,c){var d=K[a];return h.isPlainObject(d)?Ha(d,c||b):d}function e(a,b){return c.trigger.apply(c,[a,b||p].concat(Array.prototype.slice.call(arguments,2),[p]))}function f(a){return a.end?v(a.end):y(a)}function l(a,b,c){a=F[a._id];var d,e=a.length;for(d=0;d<e;d++)if(!b||a[d][0]!=b[0])a[d][c]()}function t(a,
b,c,d){c=c||0;for(var e,f=a.length,g=0;g<f;g++)e=a[g],d!==H&&(e.allDay=d),P(E(e.start,b,!0),c),e.end&&(e.end=P(E(e.end,b,!0),c)),N(e,K)}function k(a,b,c){c=c||0;for(var d,e=a.length,g=0;g<e;g++)d=a[g],d.end=P(E(f(d),b,!0),c),N(d,K)}function n(a,b){var c=p.getColCnt(),d=Q?-1:1,e=Q?c-1:0;"object"==typeof a&&(b=a.col,a=a.row);return a*c+(b*d+e)}function r(a){var b=p.visStart.getDay();a+=m[b];return 7*Math.floor(a/I)+R[(a%I+I)%I]-b}function g(a){var b=v(p.visStart);E(b,a);return b}function C(a){return ga(a,
p.visStart)}function x(a){var b=p.visStart.getDay();a+=b;return Math.floor(a/7)*I+m[(a%7+7)%7]-m[b]}function q(a){var b=p.getColCnt();return{row:Math.floor(a/b),col:(a%b+b)%b*(Q?-1:1)+(Q?b-1:0)}}var p=this;p.element=a;p.calendar=c;p.name=b;p.opt=d;p.trigger=e;p.isEventDraggable=function(a){var b=a.source||{};return fa(a.startEditable,b.startEditable,d("eventStartEditable"),a.editable,b.editable,d("editable"))&&!d("disableDragging")};p.isEventResizable=function(a){var b=a.source||{};return fa(a.durationEditable,
b.durationEditable,d("eventDurationEditable"),a.editable,b.editable,d("editable"))&&!d("disableResizing")};p.setEventData=function(a){u={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],u[d._id]?u[d._id].push(d):u[d._id]=[d]};p.clearEventData=function(){u={};F={};T=[]};p.eventEnd=f;p.reportEventElement=function(a,b){T.push({event:a,element:b});F[a._id]?F[a._id].push(b):F[a._id]=[b]};p.triggerEventDestroy=function(){h.each(T,function(a,b){p.trigger("eventDestroy",b.event,b.event,b.element)})};p.eventElementHandlers=
function(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return e("eventClick",this,a,c)}).hover(function(b){e("eventMouseover",this,a,b)},function(b){e("eventMouseout",this,a,b)})};p.showEvents=function(a,b){l(a,b,"show")};p.hideEvents=function(a,b){l(a,b,"hide")};p.eventDrop=function(a,b,c,d,f,g,l){var k=b.allDay,h=b._id;t(u[h],c,d,f);e("eventDrop",a,b,c,d,f,function(){t(u[h],-c,-d,k);L(h)},g,l);L(h)};p.eventResize=function(a,b,c,d,f,g){var l=
b._id;k(u[l],c,d);e("eventResize",a,b,c,d,function(){k(u[l],-c,-d);L(l)},f,g);L(l)};var y=p.defaultEventEnd,N=c.normalizeEvent,L=c.reportEventChange,u={},F={},T=[],K=c.options;p.isHiddenDay=function(a){"object"==typeof a&&(a=a.getDay());return O[a]};p.skipHiddenDays=function(a,b,c){for(b=b||1;O[(a.getDay()+(c?b:0)+7)%7];)E(a,b)};p.getCellsPerWeek=function(){return I};p.dateToCell=function(a){a=C(a);a=x(a);return q(a)};p.dateToDayOffset=C;p.dayOffsetToCellOffset=x;p.cellOffsetToCell=q;p.cellToDate=
function(){var a=n.apply(null,arguments),a=r(a);return g(a)};p.cellToCellOffset=n;p.cellOffsetToDayOffset=r;p.dayOffsetToDate=g;p.rangeToSegments=function(a,b){for(var c=p.getRowCnt(),d=p.getColCnt(),e=[],f=C(a),g=C(b),l=x(f),k=x(g)-1,h=0;h<c;h++){var n=h*d,m=n+d-1,n=Math.max(l,n),m=Math.min(k,m);if(n<=m){var t=q(n),S=q(m),t=[t.col,S.col].sort(),n=r(n)==f,m=r(m)+1==g;e.push({row:h,leftCol:t[0],rightCol:t[1],isStart:n,isEnd:m})}}return e};var M=d("hiddenDays")||[],O=[],I,m=[],R=[],Q=d("isRTL");(function(){!1===
d("weekends")&&M.push(0,6);for(var a=0,b=0;7>a;a++)m[a]=b,O[a]=-1!=h.inArray(a,M),O[a]||(R[b]=a,b++);I=b;if(!I)throw"invalid hiddenDays";})()}function gb(){function a(a,b,d){a=c([a],!0,!1);var e=[];R(a,function(a,c){a.row===b&&c.css("top",d);e.push(c[0])});return e}function c(a,c,g){var k=A(),w=c?h("<div/>"):k;a=b(a);var n;d(a);n=e(a);w[0].innerHTML=n;w=w.children();c&&k.append(w);f(a,w);R(a,function(a,b){a.hsides=Ma(b,!0)});R(a,function(a,b){b.width(Math.max(0,a.outerWidth-a.hsides))});R(a,function(a,
b){a.outerHeight=b.outerHeight(!0)});l(a,g);return a}function b(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],e=d.start,f=ra(d),e=$(e,f),f=0;f<e.length;f++)e[f].event=d;b.push.apply(b,e)}return b}function d(a){for(var b=C("isRTL"),c=0;c<a.length;c++){var d=a[c],e=(b?d.isStart:d.isEnd)?s:P,f=((b?d.isEnd:d.isStart)?Q:m)(d.leftCol),e=e(d.rightCol);d.left=f;d.outerWidth=e-f}}function e(a){for(var b="",c=0;c<a.length;c++){var d=a[c],e="",f=C("isRTL"),g=d.event,l=g.url,k=["fc-event","fc-event-hori"];
q(g)&&k.push("fc-event-draggable");d.isStart&&k.push("fc-event-start");d.isEnd&&k.push("fc-event-end");k=k.concat(g.className);g.source&&(k=k.concat(g.source.className||[]));var h=$a(g,C),e=l?e+("<a href='"+ba(l)+"'"):e+"<div",e=e+(" class='"+k.join(" ")+"' style='position:absolute;left:"+d.left+"px;"+h+"'><div class='fc-event-inner'>");!g.allDay&&d.isStart&&(e+="<span class='fc-event-time'>"+ba(z(g.start,g.end,C("timeFormat")))+"</span>");e+="<span class='fc-event-title'>"+ba(g.title||"")+"</span></div>";
d.isEnd&&p(g)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(f?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>");e+="</"+(l?"a":"div")+">";b+=e}return b}function f(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=d.event,f=b.eq(c),e=x("eventRender",e,e,f);!1===e?f.remove():(e&&!0!==e&&(e=h(e).css({position:"absolute",left:d.left}),f.replaceWith(e),f=e),d.element=f)}}function l(a,b){var c=t(a),d=k(),e=[];if(b)for(var f=0;f<d.length;f++)d[f].height(c[f]);for(f=0;f<d.length;f++)e.push(d[f].position().top);
R(a,function(a,b){b.css("top",e[a.row]+a.top)})}function t(a){var b=M(),c=O(),d=[],e=M(),f=[],g,k,l;for(g=0;g<a.length;g++)k=a[g],l=k.row,k.element&&(f[l]?f[l].push(k):f[l]=[k]);for(l=0;l<e;l++){a=f;g=l;var h=f[l]||[];k=[];h.sort(yb);for(var n=[],p=0;p<h.length;p++){for(var m=h[p],t=0;t<n.length;t++){var r;a:{r=n[t];for(var q=0;q<r.length;q++){var s=r[q];if(s.leftCol<=m.rightCol&&s.rightCol>=m.leftCol){r=!0;break a}}r=!1}if(!r)break}n[t]?n[t].push(m):n[t]=[m]}for(h=0;h<n.length;h++)k.push.apply(k,
n[h]);a[g]=k}for(e=0;e<b;e++){l=f[e];a=[];for(n=0;n<c;n++)a.push(0);for(g=0;g<l.length;g++)for(n=k=l[g],h=a.slice(k.leftCol,k.rightCol+1),h=Math.max.apply(Math,h),n.top=h,n=k.leftCol;n<=k.rightCol;n++)a[n]=k.top+k.outerHeight;d.push(Math.max.apply(Math,a))}return d}function k(){var a,b=M(),c=[];for(a=0;a<b;a++)c[a]=I(a).find("div.fc-day-content > div");return c}function n(a,b){var c=A();R(a,function(a,c,d){var e=a.event;e._id===b?r(e,c,a):c[0]._fci=d});Xa(c,a,r)}function r(a,b,c){q(a)&&g.draggableDayEvent(a,
b,c);c.isEnd&&p(a)&&g.resizableDayEvent(a,b,c);L(a,b)}var g=this;g.renderDayEvents=function(a,b){var d=c(a,!1,!0);R(d,function(a,b){H(a.event,b)});n(d,b);R(d,function(a,b){x("eventAfterRender",a.event,a.event,b)})};g.draggableDayEvent=function(a,b){var c=Z(),d;b.draggable({delay:50,opacity:C("dragOpacity"),revertDuration:C("dragRevertDuration"),start:function(e,f){x("eventDragStart",b,a,e,f);F(a,b);c.start(function(c,e,f,g){b.draggable("option","revert",!c||!f&&!g);J();c?(e=U(e),c=U(c),d=ga(c,e),
D(E(v(a.start),d),E(ra(a),d))):d=0},e,"drag")},stop:function(e,f){c.stop();J();x("eventDragStop",b,a,e,f);d?N(this,a,d,0,a.allDay,e,f):(b.css("filter",""),u(a,b))}})};g.resizableDayEvent=function(b,c,d){var e=C("isRTL")?"w":"e",f=c.find(".ui-resizable-"+e),g=!1;va(c);c.mousedown(function(a){a.preventDefault()}).click(function(a){g&&(a.preventDefault(),a.stopImmediatePropagation())});f.mousedown(function(f){function k(a){x("eventResizeStop",this,b,a);h("body").css("cursor","");l.stop();J();p&&K(this,
b,p,0,a);setTimeout(function(){g=!1},0)}if(1==f.which){g=!0;var l=Z();M();O();var n=c.css("top"),p,m,t=h.extend({},b),r=V(aa(b.start));Y();h("body").css("cursor",e+"-resize").one("mouseup",k);x("eventResizeStart",this,b,f);l.start(function(c,f){if(c){var g=W(f),k=W(c),k=Math.max(k,r);(p=X(k)-X(g))?(t.end=E(y(b),p,!0),g=m,m=a(t,d.row,n),m=h(m),m.find("*").css("cursor",e+"-resize"),g&&g.remove(),F(b)):m&&(u(b),m.remove(),m=null);J();D(b.start,E(ra(b),p))}},f)}})};var C=g.opt,x=g.trigger,q=g.isEventDraggable,
p=g.isEventResizable,y=g.eventEnd,H=g.reportEventElement,L=g.eventElementHandlers,u=g.showEvents,F=g.hideEvents,N=g.eventDrop,K=g.eventResize,M=g.getRowCnt,O=g.getColCnt,I=g.allDayRow,m=g.colLeft,P=g.colRight,Q=g.colContentLeft,s=g.colContentRight,A=g.getDaySegmentContainer,z=g.calendar.formatDates,D=g.renderDayOverlay,J=g.clearOverlays,Y=g.clearSelection,Z=g.getHoverListener,$=g.rangeToSegments,U=g.cellToDate,W=g.cellToCellOffset,X=g.cellOffsetToDayOffset,aa=g.dateToDayOffset,V=g.dayOffsetToCellOffset}
function R(a,c){for(var b=0;b<a.length;b++){var d=a[b],e=d.element;e&&c(d,e,b)}}function yb(a,c){return c.rightCol-c.leftCol-(a.rightCol-a.leftCol)||c.event.allDay-a.event.allDay||a.event.start-c.event.start||(a.event.title||"").localeCompare(c.event.title)}function db(){function a(a){k&&(k=!1,t(),e("unselect",null,a))}function c(a,b,c,d){k=!0;e("select",null,a,b,c,d)}var b=this;b.select=function(b,d,e){a();d||(d=f(b,e));l(b,d,e);c(b,d,e)};b.unselect=a;b.reportSelection=c;b.daySelectionMousedown=
function(e){var f=b.cellToDate,g=b.getIsCellAllDay,k=b.getHoverListener(),v=b.reportDayClick;if(1==e.which&&d("selectable")){a(e);var q;k.start(function(a,b){t();a&&g(a)?(q=[f(b),f(a)].sort(Za),l(q[0],q[1],!0)):q=null},e);h(document).one("mouseup",function(a){k.stop();q&&(+q[0]==+q[1]&&v(q[0],!0,a),c(q[0],q[1],!0,a))})}};var d=b.opt,e=b.trigger,f=b.defaultSelectionEnd,l=b.renderSelection,t=b.clearSelection,k=!1;d("selectable")&&d("unselectAuto")&&h(document).mousedown(function(b){var c=d("unselectCancel");
c&&h(b.target).parents(c).length||a(b)})}function cb(){this.renderOverlay=function(b,d){var e=c.shift();e||(e=h("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));e[0].parentNode!=d[0]&&e.appendTo(d);a.push(e.css(b).show());return e};this.clearOverlays=function(){for(var b;b=a.shift();)c.push(b.hide().unbind())};var a=[],c=[]}function eb(a){var c,b;this.build=function(){c=[];b=[];a(c,b)};this.cell=function(a,e){var f=c.length,l=b.length,h,k=-1,n=-1;for(h=0;h<f;h++)if(e>=c[h][0]&&
e<c[h][1]){k=h;break}for(h=0;h<l;h++)if(a>=b[h][0]&&a<b[h][1]){n=h;break}return 0<=k&&0<=n?{row:k,col:n}:null};this.rect=function(a,e,f,h,t){t=t.offset();return{top:c[a][0]-t.top,left:b[e][0]-t.left,width:b[h][1]-b[e][0],height:c[f][1]-c[a][0]}}}function fb(a){function c(b){b.pageX===H&&(b.pageX=b.originalEvent.pageX,b.pageY=b.originalEvent.pageY);b=a.cell(b.pageX,b.pageY);if(!b!=!f||b&&(b.row!=f.row||b.col!=f.col))b?(e||(e=b),d(b,e,b.row-e.row,b.col-e.col)):d(b,e),f=b}var b,d,e,f;this.start=function(l,
t,k){d=l;e=f=null;a.build();c(t);b=k||"mousemove";h(document).bind(b,c)};this.stop=function(){h(document).unbind(b,c);return f}}function Aa(a){var c=this,b={},d={},e={};c.left=function(c){return d[c]=d[c]===H?(b[c]=b[c]||a(c)).position().left:d[c]};c.right=function(d){return e[d]=e[d]===H?c.left(d)+(b[d]=b[d]||a(d)).width():e[d]};c.clear=function(){b={};d={};e={}}}var ua={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",
weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},zb={header:{left:"next,prev today",center:"",right:"title"},
buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},N=h.fullCalendar={version:"1.6.7"},Y=N.views={};h.fn.fullCalendar=function(a){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1),b;this.each(function(){var d=h.data(this,"fullCalendar");d&&h.isFunction(d[a])&&
(d=d[a].apply(d,c),b===H&&(b=d),"destroy"==a&&h.removeData(this,"fullCalendar"))});return b!==H?b:this}a=a||{};var d=a.eventSources||[];delete a.eventSources;a.events&&(d.push(a.events),delete a.events);a=h.extend(!0,{},ua,a.isRTL||a.isRTL===H&&ua.isRTL?zb:{},a);this.each(function(b,c){var l=h(c),t=new mb(l,a,d);l.data("fullCalendar",t);t.render()});return this};N.sourceNormalizers=[];N.sourceFetchers=[];var qb={dataType:"json",cache:!1},rb=1;N.addDays=E;N.cloneDate=v;N.parseDate=Ia;N.parseISO8601=
Ka;N.parseTime=La;N.formatDate=ea;N.formatDates=Ga;var ya="sun mon tue wed thu fri sat".split(" "),tb=864E5,sb=36E5,wb=6E4,Wa={s:function(a){return a.getSeconds()},ss:function(a){return aa(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return aa(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return aa(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return aa(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return aa(a.getDate())},
ddd:function(a,c){return c.dayNamesShort[a.getDay()]},dddd:function(a,c){return c.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return aa(a.getMonth()+1)},MMM:function(a,c){return c.monthNamesShort[a.getMonth()]},MMMM:function(a,c){return c.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>
a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return ea(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"},w:function(a,c){return c.weekNumberCalculation(a)},W:function(a){var c=new Date(a.getTime());c.setDate(c.getDate()+4-(c.getDay()||7));a=c.getTime();c.setMonth(0);c.setDate(1);return Math.floor(Math.round((a-c)/864E5)/7)+1}};N.dateFormatters=Wa;N.applyAll=wa;Y.month=function(a,c){var b=this;b.render=
function(a,c){c&&(Fa(a,c),a.setDate(1));var r=d("firstDay"),g=v(a,!0);g.setDate(1);var C=Fa(v(g),1),x=v(g);E(x,-((x.getDay()-r+7)%7));f(x);var q=v(C);E(q,(7-q.getDay()+r)%7);f(q,-1,!0);var r=h(),p=Math.round(ga(q,x)/7);"fixed"==d("weekMode")&&(E(q,7*(6-p)),p=6);b.title=t(g,d("titleFormat"));b.start=g;b.end=C;b.visStart=x;b.visEnd=q;e(p,r,!0)};Na.call(b,a,c,"month");var d=b.opt,e=b.renderBasic,f=b.skipHiddenDays,h=b.getCellsPerWeek,t=c.formatDate};Y.basicWeek=function(a,c){var b=this;b.render=function(a,
c){c&&E(a,7*c);var r=E(v(a),-((a.getDay()-d("firstDay")+7)%7)),g=E(v(r),7),C=v(r);f(C);var x=v(g);f(x,-1,!0);var q=h();b.start=r;b.end=g;b.visStart=C;b.visEnd=x;b.title=t(C,E(v(x),-1),d("titleFormat"));e(1,q,!1)};Na.call(b,a,c,"basicWeek");var d=b.opt,e=b.renderBasic,f=b.skipHiddenDays,h=b.getCellsPerWeek,t=c.formatDates};Y.basicDay=function(a,c){var b=this;b.render=function(a,c){c&&E(a,c);f(a,0>c?-1:1);var n=v(a,!0),r=E(v(n),1);b.title=h(a,d("titleFormat"));b.start=b.visStart=n;b.end=b.visEnd=r;
e(1,1,!1)};Na.call(b,a,c,"basicDay");var d=b.opt,e=b.renderBasic,f=b.skipHiddenDays,h=c.formatDate};Ta({weekMode:"fixed"});Y.agendaWeek=function(a,c){var b=this;b.render=function(a,c){c&&E(a,7*c);var r=E(v(a),-((a.getDay()-d("firstDay")+7)%7)),g=E(v(r),7),C=v(r);f(C);var x=v(g);f(x,-1,!0);var q=h();b.title=t(C,E(v(x),-1),d("titleFormat"));b.start=r;b.end=g;b.visStart=C;b.visEnd=x;e(q)};hb.call(b,a,c,"agendaWeek");var d=b.opt,e=b.renderAgenda,f=b.skipHiddenDays,h=b.getCellsPerWeek,t=c.formatDates};
Y.agendaDay=function(a,c){var b=this;b.render=function(a,c){c&&E(a,c);f(a,0>c?-1:1);var n=v(a,!0),r=E(v(n),1);b.title=h(a,d("titleFormat"));b.start=b.visStart=n;b.end=b.visEnd=r;e(1)};hb.call(b,a,c,"agendaDay");var d=b.opt,e=b.renderAgenda,f=b.skipHiddenDays,h=c.formatDate};Ta({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})})(jQuery);
